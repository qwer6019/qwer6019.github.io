---
type: posts
title: "The Graphics Rendering Pipeline"
categories: [realtime-rendering]

---
<p>
	<h3>Refernce: "Realtime Rendering, Tomas Akenine-Moller et al, 3rd, 2008"</h3><br>
</p>

<!--snippet-->
<div>
	<p>
	실시간 렌더링의 파이프라인을 'conceptual stage'로 나누면 아래와 같다.
		<ol>
			<li>Application</li>
			<li>Geometry</li>
			<li>Rasterizer</li>
		</ol>
	</p>

	<p>
	각 단계는 또한 'functional stage', 'pipeline stage'로 나눌 수 있다.<br>
	전자가 수행해야 할 테스크들을 의미한다면, 후자는 각 테스크들이 실제 수행되는 파이프라인을 의미한다.<br>
	ex) Geometry는 5개의 테스크로 구성되며 이들은 3개의 파이프라인으로 구성할 수 있다.<br>
	</p>

	<p>
		<ol>
			<li> Application: 애플리케이션 따라 구현되는 기능들을 포함하며 CPU상에서 동작한다.<br>
				ex) collision detection, global acceleration algorithms, animation, etc.
			</li>

			<li> Geometry: 무엇이, 어떻게 그리고 어디에 그려질 지 결정하는 단계로서 주로 GPU에서 수행된다.<br>
				ex) transforms, projections, etc.
			</li>

			<li> Rasterizer: 이전 단계들에서 생성된 데이터로 픽셀 단위의 연산 이후 이미지를 그리는(render) 단계로서 GPU에서 수행된다.
			</li>
		</ol>
	</p>
</div>

<div>
	<p>
		각 단계에 대해 좀 더 자세히 알아보자.<br>
		<h2>Application</h2><br>
		-  CPU에서 실행되므로 개발자가 온전히 구현을 결정할 수 있고 언제나 수정 가능하다.<br> 
		-  이 단계의 마지막에서 geometry(rendering primitive)들이 다음 단계로 전달된다.<br>
	</p>
</div>

<div>
	<p>
		<h2>Geometry</h2><br>
		- 아래와 같은 5개의 테스크로 구성된다.
		<oi>
			<li>Model & View Transform<br>
				- 각 모델(물체)가 지니는 고유의 좌표계를 월드 좌표계(model transform)를 거쳐 카메라 좌표계(view transform)로 변환하는 과정을 의미한다.
			</li>
			<li>Vertex Shading<br>
				- 각 모델은 외형(shape)뿐 아니라 외관(appearance) 또한 중요하다.<br>
				- 외관은 메테리얼과 빛에 의해 결정되며, 빛이 메테리얼에 미치는 효과를 연산하는 과정을 'shading'이라 한다.<br>
				   * 쉐이딩은 'shading equation'의 계산 과정을 포함하며 일부가 각 버텍스에 대해 수행된 후 Rasterizer 단계에서 픽셀 단위에 대해 보간된다.<br>
				   ex) point's location, normal, color 등의 다양한 메테리얼 정보가 저장된다.
			</li>

			<li>Projection<br>
				- view volume(frustum)을 (-1, -1, -1) ~ (1, 1, 1)의 unit cube(canonical view volume)로 변환하는 과정을 의미하며 아래의 두 가지 방법으로 가능하다.<br>
				<ul>
					<li>Orthographic projection: 직사각형의 view volume으로 변환하므로 평행선을 유지한다.</li>
					<li>Perspective projection: truncated pyramid 형태의 view volume으로 변환하므로 평행선이 수렴할 수 있다.</li>
				</ul>
				- 두 방법 모두 하나의 4x4 매트릭스로 변환이 가능하며 이후의 좌표를 'normalized device coordinate'이라 한다.<br>
			    - z값은 따로 z-buffer에 저장되므로 추후 역변환이 가능하다.
			</li>

			<li>Clipping<br>
			    - View volume 안에 위치하는 프리미티브들만이 rasterizer 단계에 전달되어야 하므로 view volume의 여섯 면에 대하여 클리핑을 수행하며 일부만이 면에 걸친 프리미티브들은 걸친 경계선을 바탕으로 새로운 버텍스를 생성한다.
			</li>

			<li>Screen Mapping<br>
			    - (x, y) 좌표는 스크린 크기에 맞게 스켈링이 된 후 'screen coordinate'으로 변환되며 z 좌표는 그대로 다음 단계로 전달된다.
			</li>
		</oi>
	</p>
</div>

<div>
	<p>
		<h2>Rasterizer</h2><br>
	</p>
</div>